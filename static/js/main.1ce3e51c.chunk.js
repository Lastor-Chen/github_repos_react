(this.webpackJsonpgithub_repo_list_react=this.webpackJsonpgithub_repo_list_react||[]).push([[0],{59:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(23),s=a.n(c),i=a(3),o=a(4),l=a(6),u=a(5),d=a(24),p=a.n(d).a.create({baseURL:"https://api.github.com"}),h="lastor-chen",b={pageLimit:7,getRepos:function(e){return p.get("/users/".concat(h,"/repos?sort=").concat("pushed","&page=").concat(e,"&per_page=").concat(7))},getUser:function(){return p.get("https://api.github.com/users/".concat(h))}},j=a(7),m=a.n(j),f=a(8),g=a(9),v=a.n(g),x=(a(59),a(0)),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:{avatar_url:"https://via.placeholder.com/253?text=No+Image",name:"",accountName:""}},e.fetchUser=Object(f.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.getUser();case 3:a=t.sent,n=a.data,e.setState({user:{avatar_url:n.avatar_url,name:n.name,accountName:n.login}}),e.props.onFetchedUser(n.public_repos),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),v.a.fire("503","\u7121\u6cd5\u53d6\u5f97 User\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66","error");case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this.state.user;return Object(x.jsxs)("div",{className:"card avatar-card-rwd",children:[Object(x.jsx)("img",{src:e.avatar_url,alt:"user_avatar",title:e.accountName,className:"card-img-top"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{children:e.name}),Object(x.jsx)("p",{className:"mb-0",children:e.accountName})]})]})}}]),a}(n.Component),N=a(12),y=a.n(N),w=a(25),k=a.n(w);y.a.extend(k.a);var _=y.a,R=(a(61),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"fromNow",value:function(e){return _(e).fromNow()}},{key:"ifHomepage",value:function(e){return e.homepage?Object(x.jsx)("div",{className:"ms-3",children:Object(x.jsx)("a",{href:e.homepage,children:Object(x.jsx)("span",{className:"badge bg-info",children:"demo"})})}):null}},{key:"ifDescription",value:function(e){return e.description?Object(x.jsx)("p",{className:"card-text",children:e.description}):Object(x.jsx)("p",{className:"card-text text-muted",children:"No description..."})}},{key:"render",value:function(){var e=this.props.repo;return Object(x.jsx)("div",{className:"card mb-3",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("div",{className:"card-title d-flex mb-0",children:[Object(x.jsx)("a",{href:e.html_url,className:"text-decoration-none",children:Object(x.jsx)("h5",{className:"mb-0 fw-bold",children:e.name})}),this.ifHomepage(e)]}),Object(x.jsxs)("div",{className:"repo-info my-3",children:[Object(x.jsx)("span",{className:"lang-dot me-3","data-color":e.language,children:e.language}),Object(x.jsxs)("span",{children:["Updated ",this.fromNow(e.updated_at)]})]}),Object(x.jsx)("hr",{}),this.ifDescription(e)]})})}}]),a}(n.Component));var L=function(){return Object(x.jsx)("div",{className:"text-center",children:Object(x.jsx)("div",{className:"spinner-border",role:"status",children:Object(x.jsx)("span",{className:"sr-only"})})})},S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={repos:[],isLoading:!1,page:1},e.observe=null,e.obRef=r.a.createRef(),e.fetchRepos=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,r,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({isLoading:!0}),t.next=4,b.getRepos(a);case 4:n=t.sent,r=n.data,c=r.map((function(e){return{id:e.id,name:e.name,description:e.description,html_url:e.html_url,language:e.language,homepage:e.homepage,updated_at:e.updated_at}})),s=e.state.repos.concat(c),e.setState({repos:s}),e.setState({isLoading:!1}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),e.setState({isLoading:!1}),v.a.fire("503","\u7121\u6cd5\u53d6\u5f97 Repositories\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66","error");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),e.loadMoreRepos=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,r,c,s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.state).isLoading){t.next=3;break}return t.abrupt("return",void 0);case 3:if(r=a[0].isIntersecting,c=window.innerHeight,s=e.obRef.current.offsetTop,i=s>c,r&&i){t.next=9;break}return t.abrupt("return",void 0);case 9:return o=n.page+1,e.setState({page:o}),t.next=13,e.fetchRepos(o);case 13:o===e.props.totalPage&&(e.observe.disconnect(),e.observe=null);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"ifSpinner",value:function(){return this.state.isLoading?Object(x.jsx)(L,{}):null}},{key:"componentDidMount",value:function(){this.fetchRepos(this.state.page),this.observe=new IntersectionObserver(this.loadMoreRepos),this.observe.observe(this.obRef.current)}},{key:"render",value:function(){var e=this.state.repos;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"mt-3 mt-md-0 text-center text-md-start",children:[Object(x.jsx)("span",{className:"fw-bold me-1",children:"Repositories"}),Object(x.jsx)("span",{className:"badge rounded-pill bg-secondary",children:e.length})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"position-relative",children:[e.map((function(e){return Object(x.jsx)(R,{repo:e},e.id)})),this.ifSpinner()]}),Object(x.jsx)("div",{ref:this.obRef})]})}}]),a}(n.Component),P=(a(62),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={totalPage:0},e.pageLimit=b.pageLimit,e.bgImg=r.a.createRef(),e.bgPath="".concat(".","/img/gundamcat.png"),e.updateTotalPage=function(t){e.setState({totalPage:Math.ceil(t/e.pageLimit)})},e.handleScroll=function(){if(!(window.innerWidth<768)){var t=e.bgImg.current,a=+window.scrollY.toFixed(1);t.style.backgroundPositionY="".concat(.7*a,"px"),t.style.opacity="".concat(5e-4*a)}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){window.innerWidth>768&&window.addEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"container py-5",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsxs)("div",{className:"col-md-3",children:[Object(x.jsx)(O,{onFetchedUser:this.updateTotalPage}),Object(x.jsx)("div",{className:"bg-img mt-5",style:{backgroundImage:"url(".concat(this.bgPath,")")},ref:this.bgImg})]}),Object(x.jsx)("div",{className:"col-md-9",children:Object(x.jsx)(S,{totalPage:this.state.totalPage})})]})})}}]),a}(n.Component));var U=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(P,{})})};s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(U,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.1ce3e51c.chunk.js.map